#!/usr/bin/env nodejs

var path = require('path');
var configFile = path.join(__dirname, 'config.json');
var fs = require('fs');


var users =  [
        { id: 2, username: 'test', password: 'test', email: 'test@example.com', inroles: [ 'ROLE_GUEST','ROLE_ADMIN' ], config: { mode: 'clear' } }
        ];
var roles = [
        { name: 'ROLE_ADMIN', routes: [ '/Videos/*' ] },
        { name: 'ROLE_GUEST', routes: [ '/Videos/perso' ] } ];


  var data = '{ "users": ' + JSON.stringify(users) + ', "roles": ' + JSON.stringify(roles) + '}';
	console.log(data);
  fs.writeFile(configFile, data, function (err) {
    if (err) {
      console.log('There has been an error saving your configuration data.');
      console.log(err.message);
      return;
    }
    console.log('Configuration saved successfully.')
    
	var data = fs.readFileSync(configFile,  'utf-8');
var myObj;

  try {
    myObj = JSON.parse(data);
    console.dir(myObj);
  }
  catch (err) {
    console.log('There has been an error parsing your JSON.')
    console.log(err);
  }


  });

//JSON.parse(fs.readFileSync(configFile, 'utf-8'));
